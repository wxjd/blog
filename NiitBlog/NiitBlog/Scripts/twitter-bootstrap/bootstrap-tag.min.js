!function(n){"use strict";var t=function(t,i){this.element=n(t),this.options=n.extend(!0,{},n.fn.tag.defaults,i),this.values=n.grep(n.map(this.element.val().split(","),n.trim),function(n){return n.length>0}),this.show()},i;t.prototype={constructor:t,show:function(){var t=this;t.element.parent().prepend(t.element.detach().attr("type","hidden"));t.element.wrap(n('<div class="tags">')).parent().on("click",function(){t.input.focus()});t.values.length&&n.each(t.values,function(){t.createBadge(this)}),t.input=n('<input type="text" maxlength="30">').attr("placeholder",t.options.placeholder).insertAfter(t.element).on("focus",function(){t.element.parent().addClass("tags-hover")}).on("blur",function(){t.process(),t.element.parent().removeClass("tags-hover"),t.element.siblings(".tag").removeClass("tag-important")}).on("keydown",function(i){var r,u;i.keyCode==188||i.keyCode==13||i.keyCode==9?n.trim(n(this).val())&&(!t.element.siblings(".typeahead").length||t.element.siblings(".typeahead").is(":hidden"))?(i.keyCode!=9&&i.preventDefault(),t.process()):i.keyCode==188&&(!t.element.siblings(".typeahead").length||t.element.siblings(".typeahead").is(":hidden")?i.preventDefault():(t.input.data("typeahead").select(),i.stopPropagation(),i.preventDefault())):n.trim(n(this).val())||i.keyCode!=8?t.element.siblings(".tag").removeClass("tag-important"):(r=t.element.siblings(".tag").length,r&&(u=t.element.siblings(".tag:eq("+(r-1)+")"),u.hasClass("tag-important")?t.options.postedit==!0?t.options.del1(u,t,r):t.remove(r-1):u.addClass("tag-important")))}).typeahead({source:t.options.source,matcher:function(n){return~n.toLowerCase().indexOf(this.query.toLowerCase())&&(t.inValues(n)==-1||t.options.allowDuplicates)},updater:n.proxy(t.add,t)})},inValues:function(t){if(this.options.caseInsensitive){var i=-1;return n.each(this.values,function(n,r){if(r.toLowerCase()==t.toLowerCase())return i=n,!1}),i}return n.inArray(t,this.values)},createBadge:function(t){var i=this;n('<span class="tag">'+t+"<\/span>").append(n('<button type="button" class="close">&times;<\/button>').on("click",function(){var r=n(this);i.options.postedit==!0?i.options.del2(t,i,r):i.remove(i.element.siblings(".tag").index(n(this).closest(".tag")))})).insertBefore(i.element)},add:function(t){var i=this,r,u;if(!i.options.allowDuplicates&&(r=i.inValues(t),r!=-1)){u=i.element.siblings(".tag:eq("+r+")"),u.addClass("tag-warning"),setTimeout(function(){n(u).removeClass("tag-warning")},500);return}this.values.push(t),this.createBadge(t),this.element.val(this.values.join(","))},remove:function(n){n>=0&&(this.values.splice(n,1),this.element.siblings(".tag:eq("+n+")").remove(),this.element.val(this.values.join(", ")))},process:function(){var t=n.grep(n.map(this.input.val().split(","),n.trim),function(n){return n.length>0}),i=this;n.each(t,function(){i.add(this)}),this.input.val("")}},i=n.fn.tag,n.fn.tag=function(i){return this.each(function(){var u=n(this),r=u.data("tag"),f=typeof i=="object"&&i;r||u.data("tag",r=new t(this,f)),typeof i=="string"&&r[i]()})},n.fn.tag.defaults={allowDuplicates:!1,caseInsensitive:!0,placeholder:"输入标签后按回车添加",source:[],postedit:!1,del1:null,del2:null},n.fn.tag.Constructor=t,n.fn.tag.noConflict=function(){return n.fn.tag=i,this},n(document).ready(function(){n('[data-provide="tag"]').each(function(){var t=n(this);t.data("tag")||t.tag(t.data())})})}(window.jQuery);
//@ sourceMappingURL=bootstrap-tag.min.js.map